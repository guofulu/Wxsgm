webpackJsonp([33],{"62E1":function(t,e){},DCoa:function(t,e,i){"use strict";e.a=function(t,e){console.log("定位中...."),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){console.log("定位成功------");var i=e.coords.longitude,c=e.coords.latitude;t&&t({lat:c,lng:i})},function(t){console.log(t),console.log("获取用户位置失败！"),e&&e()})}},grE2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=i("mvHQ"),a=i.n(c),n=i("Xxa5"),o=i.n(n),s=i("exGp"),r=i.n(s),l=i("i5qY"),_=i("4iqT"),y=i("gyMJ"),u=i("DCoa"),v=null,p={name:"City",data:function(){return{list:[],listTop:[],selectIndex:-100,hotList:[],curCityName:"",locCityName:"定位中...",showLoading:!0,cityId:"0",cityName:"全国",abbreviation:""}},created:function(){var t=JSON.parse(localStorage.getItem("ADDRESS")),e=JSON.parse(localStorage.getItem("LOCATION_ADDRESS"));if(e){var i=t?t.city_id:"",c=t?t.city_name:"全国";e.city_id!=i?localStorage.getItem("LIMIT_FLAG")?this.locCityName=e.city_name:(localStorage.setItem("LIMIT_FLAG",1),Object(u.a)(this.getUserLocationCityDataWrap)):this.locCityName=e.city_name,this.curCityName=c}else this.curCityName=t?t.city_name:"全国",Object(u.a)(this.getUserLocationCityDataWrap,this.locationErrorCallback);this.getHotCityListWrap(),this.getSortedCityListWrap()},mounted:function(){var t=this;this.$nextTick(function(){v=new BScroll(t.$refs.wrapper,{scrollY:!0,click:!0,probeType:3})})},methods:{getSortedCityListWrap:function(){var t=this;return r()(o.a.mark(function e(){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y._1)();case 3:i=e.sent,t.list=i,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},getHotCityListWrap:function(){var t=this;return r()(o.a.mark(function e(){var i,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.s)();case 3:(i=e.sent).unshift({cityName:"全国",cityId:"0",abbreviation:""}),t.hotList=i,c=setTimeout(function(){t.showLoading=!1,clearTimeout(c)},200),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,t,[[0,9]])}))()},getUserLocationCityDataWrap:function(t){var e=this;return r()(o.a.mark(function i(){var c;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(y._5)(t);case 3:c=i.sent,e.cityId=c.cityId,e.cityName=c.cityName,e.abbreviation=c.abbreviation,e.locCityName=c.cityName,ADDRESS||localStorage.setItem("ADDRESS",a()({city_id:e.cityId,city_name:e.cityName,Abbreviation:e.abbreviation})),localStorage.setItem("LOCATION_ADDRESS",a()({city_id:e.cityId,city_name:e.cityName,Abbreviation:e.abbreviation})),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(0),console.log(i.t0);case 15:case"end":return i.stop()}},i,e,[[0,12]])}))()},locationErrorCallback:function(){this.locCityName="全国",localStorage.setItem("LOCATION_ADDRESS",a()({city_id:this.cityId,city_name:this.cityName,Abbreviation:this.abbreviation}))},handleSelectLetter:function(t){this.selectIndex=t;var e=this.$refs.list.map(function(t){return t.offsetTop-45});this.listTop=e;var i=-e[t];-3!=t&&-2!=t&&-1!=t||(i=0),v.scrollTo(0,i,100,"easing")},handleSelectCity:function(t,e,i){var c=void 0;1==t?c=this.hotList[e]:2==t?c=this.list[e].list[i]:3==t&&(c={cityId:this.cityId,cityName:this.cityName,abbreviation:this.abbreviation}),this.curCityName=c.cityName,localStorage.setItem("ADDRESS",a()({city_id:c.cityId,city_name:c.cityName,Abbreviation:c.abbreviation})),this.$router.push("/")}},components:{Head:l.a,LoadingIcon:_.a}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city"},[i("Head",{attrs:{title:"城市选择"}}),t._v(" "),i("section",{ref:"wrapper",staticClass:"city-block"},[i("div",{staticClass:"city-block__wrapper"},[i("div",{staticClass:"city-block__con"},[i("span",{staticClass:"city-block__con__tip"},[t._v("当前城市")]),t._v(" "),i("ul",{staticClass:"city-block__con__wrap"},[i("li",{staticClass:"city-block__con__item"},[t._v(t._s(t.curCityName))])])]),t._v(" "),i("div",{staticClass:"city-block__con"},[i("span",{staticClass:"city-block__con__tip"},[t._v("定位城市")]),t._v(" "),i("ul",{staticClass:"city-block__con__wrap"},[i("li",{staticClass:"city-block__con__item c_ff6",on:{click:function(e){return t.handleSelectCity(3)}}},[t._v(t._s(t.locCityName))])])]),t._v(" "),i("div",{staticClass:"city-block__con"},[i("span",{staticClass:"city-block__con__tip"},[t._v("热门城市")]),t._v(" "),i("ul",{staticClass:"city-block__con__wrap"},t._l(t.hotList,function(e,c){return i("li",{key:c,staticClass:"city-block__con__item hots--item",on:{click:function(e){return t.handleSelectCity(1,c)}}},[t._v(t._s(e.cityName))])}),0)]),t._v(" "),i("section",{staticClass:"city-block__row"},t._l(t.list,function(e,c){return i("div",{key:c,ref:"list",refInFor:!0,staticClass:"city-block__row__con"},[i("span",{staticClass:"city-block__row__con__letter"},[t._v(t._s(e.letter))]),t._v(" "),i("ul",{staticClass:"city-block__row__con__wrap"},t._l(e.list,function(e,a){return i("li",{key:e.id,staticClass:"city-block__row__con__column",on:{click:function(e){return t.handleSelectCity(2,c,a)}}},[t._v(t._s(e.cityName))])}),0)])}),0)])]),t._v(" "),i("section",{staticClass:"city-nav"},[i("span",{staticClass:"city-nav__lab",class:{active:-3==t.selectIndex},on:{click:function(e){return e.stopPropagation(),t.handleSelectLetter(-3)}}},[t._v("当前")]),t._v(" "),i("span",{staticClass:"city-nav__lab",class:{active:-2==t.selectIndex},on:{click:function(e){return e.stopPropagation(),t.handleSelectLetter(-2)}}},[t._v("定位")]),t._v(" "),i("span",{staticClass:"city-nav__lab",class:{active:-1==t.selectIndex},on:{click:function(e){return e.stopPropagation(),t.handleSelectLetter(-1)}}},[t._v("热门")]),t._v(" "),t._l(t.list,function(e,c){return i("span",{key:c,staticClass:"city-nav__lab",class:{active:c==t.selectIndex},on:{click:function(e){return e.stopPropagation(),t.handleSelectLetter(c)}}},[t._v(t._s(e.letter))])})],2),t._v(" "),t.showLoading?i("LoadingIcon"):t._e()],1)},staticRenderFns:[]};var b=i("VU/8")(p,d,!1,function(t){i("62E1")},"data-v-1e6e9f4e",null);e.default=b.exports}});